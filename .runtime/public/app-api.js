export async function requestJson(t,e,r={}){const{allowBusinessError:s=!1,...n}=r,o=new Headers(n.headers||{});null!=n.body&&!o.has("content-type")&&o.set("content-type","application/json");const a=await t(e,{...n,headers:o});let w=null;try{w=await a.json()}catch{throw new Error(`响应解析失败 (HTTP ${a.status})`)}if(!a.ok)throw new Error(w?.message||`请求失败 (HTTP ${a.status})`);if(!s&&!1===w?.ok)throw new Error(w.message||"请求失败");return w}