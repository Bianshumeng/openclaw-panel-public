# 1.2 / 1.3 拆分前基线与一致性口径

记录时间：2026-02-17 04:45（UTC+8）

## 一、自动化基线

执行命令：

```bash
npm test
```

结果：
- `test:unit`：58/58 通过。
- `test:regression`：3 通过，1 跳过（已知 skip：`docker-rollback keeps .env unchanged when target image pull fails`）。
- 无失败用例。

## 二、Docker 运行态基线

执行命令：

```bash
docker compose up -d --build panel
```

结果：
- `openclaw-panel` 重建并启动成功。
- `openclaw-gateway` 保持运行。

## 三、页面/API 可达性探针

执行命令（PowerShell）：

```powershell
$targets = @(
  'http://127.0.0.1:18080/api/health',
  'http://127.0.0.1:18080/dashboard',
  'http://127.0.0.1:18080/model',
  'http://127.0.0.1:18080/channels',
  'http://127.0.0.1:18080/channels/telegram',
  'http://127.0.0.1:18080/skills',
  'http://127.0.0.1:18080/chat-console',
  'http://127.0.0.1:18080/service',
  'http://127.0.0.1:18080/update',
  'http://127.0.0.1:18080/logs',
  'http://127.0.0.1:18080/config-generator'
)
foreach ($u in $targets) {
  $r = Invoke-WebRequest -Uri $u -UseBasicParsing -TimeoutSec 10
  "OK $($r.StatusCode) $u"
}
```

结果：
- 以上 11 个目标全部返回 `200`。

## 四、Linux 一致性回放口径（1.3）

### 回放维度
1. 配置保存：`/model` 与 `/channels/telegram`。
2. 运行控制：`/service` 启停与状态刷新。
3. 更新能力：`/update` 自动检查 + 手动触发升级流程。
4. 聊天能力：`/chat-console` 会话切换 + 发送 + 流式输出。
5. 地址展示：外部地址和 Webhook 展示必须为“公网 IP + 端口”。

### 判定标准
- 与 Windows Docker 基线行为一致（同样步骤、同样结果语义）。
- 无“仅 Windows 有效”的脚本路径、权限、网络依赖。
- 容器间通信仅走内网，不依赖公网映射端口。

### 备注
- 本文只定义口径，不替代 4.3 的 Linux 实地回放。4.3 必须在 Linux 环境补证据。
