# 任务清单

## 1. 准备阶段
- [x] 1.1 阅读 OpenClaw Discord/Slack 配置 schema | 验收：确认字段来源 `zod-schema.providers-core.ts`
- [x] 1.2 明确傻瓜化字段边界 | 验收：仅保留终端用户需要的业务字段

## 2. 实现阶段
- [x] 2.1 扩展后端 settings schema | 验收：支持 `channels.discord`、`channels.slack`
- [x] 2.2 扩展配置读写映射 | 验收：`extract/apply` 可对齐官方字段并兼容 `dm.*` 别名
- [x] 2.3 扩展前端配置表单 | 验收：页面新增 Discord/Slack 卡片与字段绑定
- [x] 2.4 增加渠道测试接口 | 验收：新增 Discord/Slack 测试 API 与前端按钮

## 3. 验证阶段
- [x] 3.1 语法检查通过 | 验收：`node --check` 通过
- [x] 3.2 冒烟检查通过 | 验收：`npm run check` 通过
- [x] 3.3 配置接口回归通过 | 验收：`GET/PUT /api/settings` 覆盖 Discord/Slack 字段

## 4. 收尾阶段
- [x] 4.1 规格主文档同步 | 验收：`plan/规格/OpenClaw面板.md` 已补 Discord/Slack
- [x] 4.2 归档任务文档 | 验收：任务目录已落到 `plan/归档/`

## 经验记录
### 步骤 2 完成记录
- 实际情况：Discord/Slack 都有 `dmPolicy/allowFrom` 别名与 `dm.*` 旧结构，写入时必须双写避免兼容问题。
- 遇到问题：本地 18080 端口存在旧进程，导致前端读取旧接口结构，需先清理再验证。
- 技术债：多账号（`accounts.*`）目前只覆盖 `main/首账号`，后续可补专用账号管理页。
