# 前端九页独立化改造

创建时间：2026-02-16 02:10:00

## 为什么做
- 当前前端是“单 HTML + 单大脚本”的单页面板：9 个业务页面都塞在 `public/index.html` 与 `public/app.js`。
- 这种结构在功能继续增加后，页面间耦合会持续放大：改一个页面容易误伤另一个页面，回归成本高。
- 本项目面向小白用户，要求“稳定、简单、可长期维护”；继续堆在单文件会快速演化成高风险维护模式。

## 改什么
- 将现有 9 个侧栏页面从单页分区结构拆为独立页面文件（多路由 + 多 HTML + 分页脚本）。
- 建立共享壳层（侧栏、页头、全局提示、基础样式）与按页加载机制，避免重复代码。
- 第一阶段先做两页试点：`/dashboard` 与 `/model`；验证通过后按同一模式拆其余 7 页。
- 路由保持不变（用户访问地址不变），仅替换实现形态。

## 影响范围
- 前端：`public/index.html`、`public/app.js`、`public/styles.css`（拆分并降耦）。
- 新增：`public/pages/*.html`、`public/js/core/*`、`public/js/pages/*`。
- 后端：`src/server.js`（已知路由到独立页面文件的静态返回策略）。
- 风险等级：L2（跨模块、涉及页面架构重排）。

## 不做什么（边界）
- 不引入 React/Vue/Vite 等新框架和构建链。
- 不修改 OpenClaw/龙虾 Bot 核心源码。
- 不在本任务内大改业务功能，只做结构拆分与等价迁移。
- 不改变既有 API 契约和字段语义。

## 验证（存在风险时必填）
- 自动化：`npm test` 必须通过。
- 运行态：`docker compose up -d --build panel` 后，`/dashboard`、`/model` 页面可用且核心操作通过。
- 手工回放：模型切换、仪表盘刷新、快速跳转、配置写回至少各一次。
- 环境一致性：记录 Windows Docker 与 Linux 生产门禁差异项，确保后续可在 Linux 复验。

## 回滚（存在风险时必填）
- 回滚触发条件：拆分后出现页面不可访问、核心操作失败、跨页样式/逻辑串扰。
- 回滚步骤：
  1. 回退到拆分前稳定 commit；
  2. 保留当前文档与问题清单，按问题最小化重做；
  3. 重新从“两页试点”进入，不直接全量拆分。