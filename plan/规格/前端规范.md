# 前端规范

最后更新：2026-02-16

## 能力概述

规范控制台前端的信息架构、交互行为、状态管理与文案表达，确保迁移后页面一致、易懂、可维护。

## 关联文档
- `plan/规格/产品需求.md`
- `plan/规格/应用流程.md`
- `plan/规格/后端结构.md`
- `plan/规格/OpenClaw面板.md`

## 需求列表

### 需求：信息架构一致
侧栏导航命名和分组必须以用户任务为中心，避免技术术语堆叠。

#### 场景：核心入口命名
- 当 展示导航菜单
- 那么 必须使用中文任务化命名（如“仪表盘”“模型与提供商配置”“渠道配置”“对话控制台”）

#### 场景：重复信息治理
- 当 同一系统状态在多个区域出现
- 那么 必须将主展示收敛到仪表盘，其他页面仅保留必要上下文

### 需求：模型与提供商页面可理解
模型页必须明确区分“设置当前默认模型”和“新增提供商”两条路径。

#### 场景：小白用户操作
- 当 用户进入模型页
- 那么 必须看到简明说明：先选默认模型，或新增提供商后再选模型

#### 场景：模板配置
- 当 用户使用基础模板
- 那么 只需填写提供商名、URL、Key 即可完成配置

#### 场景：自定义配置
- 当 用户切换到自定义模式
- 那么 必须展示完整字段并提供校验反馈

### 需求：仪表盘展示规范
仪表盘卡片必须突出“当前状态”和“可执行动作”。

#### 场景：模型卡片
- 当 展示可用模型
- 那么 按提供商分组，并标出当前模型、上下文窗口、最大输出、思考强度

#### 场景：风险提示
- 当 用户切换到更小上下文模型
- 那么 必须出现明确风险提示，且提示可读、可关闭

### 需求：Chat 交互规范
对话控制台必须采用稳定的状态机 UI，避免发送态卡死或消息重复。

#### 场景：流式消息
- 当 收到 `delta` 事件
- 那么 必须增量刷新消息区，不覆盖已完成消息

#### 场景：最终消息
- 当 收到 `final` 事件
- 那么 必须完成消息落地并清理流式占位状态

#### 场景：思考显示
- 当 用户切换“思考状态”
- 那么 必须仅控制展示层，不触发额外请求

### 需求：错误反馈规范
所有失败操作必须返回可执行的错误信息，不允许“静默失败”。

#### 场景：保存失败
- 当 配置保存失败
- 那么 必须展示失败原因、影响范围和建议修复动作

#### 场景：接口不可用
- 当 后端接口降级或超时
- 那么 必须提示“当前能力不可用”并保持页面其余功能可用

### 需求：代码组织规范
前端脚本必须模块化，避免单文件持续膨胀。

#### 场景：新增模块
- 当 增加 dashboard/chat/skills 大块逻辑
- 那么 必须拆分为独立模块文件，并保留统一入口编排

#### 场景：可测试性
- 当 涉及关键状态变更逻辑
- 那么 必须补充最小可验证脚本或测试用例
