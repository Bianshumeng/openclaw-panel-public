# 应用流程

最后更新：2026-02-16

## 能力概述

定义控制台主要页面与关键操作链路，确保用户路径清晰、动作可回放、异常可处理。

## 关联文档
- `plan/规格/产品需求.md`
- `plan/规格/前端规范.md`
- `plan/规格/后端结构.md`
- `plan/规格/OpenClaw面板.md`

## 需求列表

### 需求：主导航流程清晰
主导航必须至少包含：仪表盘、模型与提供商配置、渠道配置、对话控制台、更新管理、服务状态、日志中心。

#### 场景：页面切换
- 当 用户点击侧栏导航
- 那么 系统必须在对应页面展示该模块核心操作，不出现重复入口冲突

#### 场景：默认落点
- 当 用户访问根路径
- 那么 系统必须落在仪表盘页面

### 需求：仪表盘流程
仪表盘必须承载“看全局”和“快速动作”的流程。

#### 场景：快速判断系统健康
- 当 用户进入仪表盘
- 那么 系统必须展示关键健康指标与当前默认模型

#### 场景：快速切换模型
- 当 用户在仪表盘执行模型切换
- 那么 系统必须完成切换并反馈结果，必要时提示上下文风险

### 需求：模型与提供商配置流程
模型页必须拆分为“设置当前默认模型”和“新增提供商”两条路径。

#### 场景：默认模型设置
- 当 用户在下拉中选择模型并保存
- 那么 系统必须更新默认模型引用并回显当前生效值

#### 场景：新增提供商
- 当 用户选择模板或自定义并填写 URL/Key
- 那么 系统必须完成写入并支持后续选择该提供商模型

### 需求：渠道配置流程
渠道页必须统一管理 OpenClaw 实际渠道配置，并提供可复现测试。

#### 场景：Telegram 接入
- 当 用户填写 Bot Token 等字段并点击测试
- 那么 系统必须返回明确的连通性结果与错误原因

#### 场景：飞书接入
- 当 用户填写 AppId/AppSecret 并提交
- 那么 系统必须保存配置并返回校验结果

### 需求：Skills 管理流程
Skills 页必须支持“查看 -> 变更 -> 验证”的闭环。

#### 场景：查看技能状态
- 当 用户进入 Skills 页面
- 那么 系统必须展示技能列表和启用状态

#### 场景：变更技能状态
- 当 用户启用或停用技能
- 那么 系统必须进行确认并返回执行结果

### 需求：对话控制台流程
对话控制台必须支持多会话、流式消息、思考状态、中止运行。

#### 场景：会话切换
- 当 用户切换会话
- 那么 系统必须加载该会话历史，并保持输入区状态一致

#### 场景：消息流式返回
- 当 用户发送消息
- 那么 系统必须按 delta 逐步更新，并在 final 时完成落地

#### 场景：中止运行
- 当 用户点击停止
- 那么 系统必须终止当前运行并恢复可发送状态

### 需求：更新与日志流程
更新与日志页必须支持运维排障闭环。

#### 场景：检查更新与升级
- 当 用户发起检查/升级/回滚
- 那么 系统必须提供可追踪结果并保留失败原因

#### 场景：日志排障
- 当 用户查看实时日志或错误摘要
- 那么 系统必须支持过滤、实时刷新和关键错误定位
