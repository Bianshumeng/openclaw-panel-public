# 大盘鸡项目历史对话增量归档（截至 2026-02-17 14:38）

## 1. 本轮核心主题（像日记一样的直白版）
- 今天这轮的主线不是改母鸡、也不是修小鸡，而是把你长期被 SSH 指纹校验卡住的问题一次性讲明白并落地处理。
- 你最关心的是：到底是不是服务器有问题，还是本地 SSH 客户端机制导致的。
- 最后结论很清晰：这类“同 IP + 不同端口 + 端口复用”的场景里，最容易报错的是你本地 `known_hosts` / 指纹校验策略，不是小鸡坏了。

## 2. 这轮我们做了什么
### 2.1 先把概念掰直（避免继续误判）
- 明确了 SSH 有两套校验：
  - 服务器身份校验（Host Key Fingerprint）：由**本地客户端**执行；
  - 用户身份校验（密码/公钥）：由**服务器端**执行。
- 解释了为什么你会出现“密码是对的但仍连不上”：
  - 因为连接会先做服务器指纹校验；
  - 指纹冲突时，连密码阶段都进不去。

### 2.2 把你关心的定位问题定性
- 你问“是不是模板小鸡里面要改”，我们确认：
  - 模板机要保证克隆卫生（这块你现在没暴雷）；
  - 你当前高频遇到的阻断点是本地客户端策略，不是母鸡/小鸡服务异常。
- 你问“客户两台电脑同时连会不会出问题”，结论：
  - 正常不会；
  - 问题主要发生在运维端反复用同一公网端口连接不同 VM 时。

### 2.3 按你要求直接动手改本地 SSH
- 你明确要求：取消指纹验证，只走密码验证。
- 已在本机 `C:\Users\bians\.ssh\config` 追加规则，仅针对你的两台入口：
  - `135.181.162.231`
  - `151.242.164.130`
- 已做本地生效校验，确认参数生效：
  - `StrictHostKeyChecking no`
  - `UserKnownHostsFile NUL`
  - `GlobalKnownHostsFile NUL`

## 3. 已完成项（可复核）
- [x] 完成“问题归因”统一口径：不是母鸡故障，不是小鸡故障，主要是本地 SSH 指纹机制触发。
- [x] 完成“只针对业务入口主机”的 SSH 配置改造（非全局乱改）。
- [x] 完成配置生效检查（`ssh -G` 输出已确认）。
- [x] 输出后续连接建议：继续用 `root@IP -p 端口`，不强依赖别名。

## 4. 本轮关键结论（给你回看用）
- 你之前遇到的“连接被拒/反复提示指纹”在当前业务模型下属于**可预期现象**。
- 你已经选择了“禁用这两台入口的指纹校验”路线，当前这类阻断基本可以收口。
- 后续若再出现卡顿/timeout，应优先按链路问题排查（网络/路由/负载），不要再按“指纹冲突”方向浪费时间。

## 5. 当前遗留与后续建议
- 遗留 1（策略层）：现在是“效率优先”配置，安全性下降（会忽略主机真伪校验）。
- 遗留 2（运营层）：如果后续交付给更高安全要求客户，建议再切回强校验模式。
- 可选优化：
  1. 给运维电脑单独维护一份 `ssh/config` 的“生产安全版”和“运维快连版”；
  2. Bot 输出连接信息时附一行“该端口可能复用，若启用校验请先清 known_hosts”。

## 6. 本轮落盘改动
- 修改文件：`C:\Users\bians\.ssh\config`
- 新增策略块（已生效）：
  - `Host 135.181.162.231 151.242.164.130`
  - `StrictHostKeyChecking no`
  - `UserKnownHostsFile NUL`
  - `GlobalKnownHostsFile NUL`

## 7. 给下轮会话的接手提示
- 如果你说“又连不上了”，第一步不要再怀疑指纹，先看是：
  - `Permission denied`（密码/账号问题）
  - `Connection timed out`（网络链路问题）
  - `Connection reset`（服务端/中间链路问题）
- 当前指纹策略已经按你的诉求关闭，除非你手动改回，否则这条线不再是主矛盾。
